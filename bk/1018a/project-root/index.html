<!DOCTYPE html>
<html lang="ja">
  <head>
    <base href="../" />
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />
    <meta name="theme-color" content="#ffffff" />
    <title>
      第９回みんなで決めよう！ホントに美味しいお酒はこれだ！全国大会
    </title>
    <meta
      name="description"
      content="参加者ごとに日本酒を0〜10点で採点し、平均点ランキングを表示する投票ページ"
    />
    <link rel="stylesheet" href="/css/styles.css?v=20251018" />

    <script>
      // ★ GASの /exec URL（必要に応じて差し替え）
      window.GAS_API_URL =
        'https://script.google.com/macros/s/AKfycbxo2G6tjdVZUDav0Vxh5Rznen4C1o7zxdk_sM-7_jyJdoYwseDNErgIj__kP7vFwDQdBA/exec';
    </script>
  </head>

  <body>
    <noscript
      >このページを利用するにはJavaScriptを有効にしてください。</noscript
    >

    <header class="site-header">
      <div class="container">
        <h1>第９回みんなで決めよう！ホントに美味しいお酒はこれだ！全国大会</h1>
        <p class="lead">
          参加者情報より氏名を選択し、各銘柄を<span class="em">★（0〜10）</span
          >で採点してください。<br />
          送信後は<strong>最新の回答</strong>が有効になります（再送信可）。
        </p>
      </div>
    </header>

    <main class="container" id="main">
      <!-- 参加者情報 -->
      <section class="card" aria-labelledby="section-participant">
        <h2 id="section-participant">参加者情報</h2>
        <div class="field">
          <label for="nickname">参加者（必須）</label>
          <select id="nickname" required aria-describedby="nicknameHelp">
            <option value="" disabled selected hidden>読み込み中...</option>
          </select>
          <small id="nicknameHelp" class="help"
            >管理者の方は自分の名前を選ぶと管理パネルが表示されます</small
          >
        </div>
      </section>

      <!-- 採点エリア（星評価） -->
      <section class="card" aria-labelledby="section-score">
        <div class="card-head">
          <h2 id="section-score">採点（★0〜10）</h2>
          <div class="head-actions">
            <button
              id="clearBtn"
              class="btn ghost"
              type="button"
              aria-busy="false"
            >
              全リセット
            </button>
          </div>
        </div>

        <div
          id="sake-list"
          class="grid"
          aria-live="polite"
          aria-busy="true"
        ></div>

        <div class="actions">
          <button
            id="sendBtn"
            class="btn primary"
            type="button"
            disabled
            aria-busy="false"
          >
            投票する
          </button>
          <span id="msg" class="msg" aria-live="polite" role="status"></span>
        </div>
      </section>

      <!-- ビジュアル投票（画像クリック） -->
      <!-- ※ 中身は app.js の renderVisualVoting が挿入します。ここには置かないでOK -->

      <!-- ランキング -->
      <section class="card" aria-labelledby="section-ranking">
        <div class="card-head">
          <h2 id="section-ranking">現在のランキング（平均点）</h2>
          <button id="refreshBtn" class="btn" type="button" aria-busy="false">
            更新する
          </button>
        </div>
        <ol
          id="ranking"
          class="ranking"
          aria-live="polite"
          aria-busy="true"
        ></ol>
        <p id="meta" class="meta"></p>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container"><small>© 日本酒試飲会</small></div>
    </footer>

    <!-- deferでDOM構築後に実行／blockingを避ける -->
    <script src="/js/app.js" defer></script>
  </body>
</html>
